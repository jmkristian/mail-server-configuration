Here's how the packages were installed, as recommended by:
https://www.vultr.com/docs/how-to-install-postfix-dovecot-and-roundcube-on-ubuntu-20-04

# Edit /etc/systemd/journald.conf to contain:
MaxFileSec=1day
MaxRetentionSec=2week

apt-get install -y postfix
# select "Internet Site"
# mail domain name: jkristian.com

apt-get install -y dovecot-core dovecot-imapd dovecot-pop3d dovecot-lmtpd
# By the way, here's how to un-install it completely (including configuration files):
# apt-get purge -y dovecot-core dovecot-imapd dovecot-pop3d dovecot-lmtpd
# apt-get autoremove --purge -y

groupadd -g 5000 vmail
useradd -r -g vmail -u 5000 vmail -d /var/mail/vhosts -c "virtual mail user"
mkdir -p /var/mail/vhosts/jkristian.com
chown -R vmail:vmail /var/mail/vhosts/
# Create /etc/postfix/sasl_passwd containing:
[mta1.jkristian.com]:587 getmail@jkristian.com:STRONG_PASSWORD
[mta1.jkristian.com]     getmail@jkristian.com:STRONG_PASSWORD

# Deploy the new configuration files (./deploy).
# Test:
service dovecot start; service postfix start
telnet `hostname` 587
ehlo jkristian.com
quit
service postfix stop; service dovecot stop

apt-get install -y apache2
a2enmod proxy
a2enmod proxy_http
a2enmod substitute
a2enmod rewrite
service apache2 restart
# Test: browse http://`hostname`

apt-get install -y php
apt-get install -y php-{common,mysql,xml,xmlrpc,curl,gd,imagick,cli,dev,imap,mbstring,opcache,soap,zip,intl}
# Deploy the new configuration files (./deploy).
# Test: browse http://`hostname`/info.php

apt-get install -y roundcube
# Select 'Yes' configure database with dbconfig-common.
# Enter password = PASSWORD
# Deploy the new configuration files (./deploy).
# Test: browse http://`hostname`/info.php
# Test: browse http://`hostname`/email

apt-get install -y getmail
./deploy
service getmail start
systemctl enable getmail

apt-get install -y slapd ldap-utils
echo -n ${an unguessable password} > /etc/dovecot/ldap-password.txt
echo -n ${an unguessable password} > /etc/ldap/admin-password.txt
echo -n ${an unguessable password} > /etc/sftpgo/admin-password.txt
chmod o-rwx /etc/dovecot/ldap-password.txt
chmod o-rwx /etc/ldap/admin-password.txt
chmod o-rwx /etc/sftpgo/admin-password.txt
dpkg-reconfigure slapd
# base domain = jkristian.com
# Enable Dovecot to search by mail and read passwords:
ldapmodify -Q -Y EXTERNAL -H ldapi:/// -f ldap/access.ldif
# Add Dovecot and some users to the LDAP directory:
./expand ldap/users.ldif | ldapadd -x -D "cn=admin,dc=jkristian,dc=com" -y /etc/ldap/admin-password.txt
# Check the results:
ldapsearch -Q -Y EXTERNAL -H ldapi:/// -LLL -b "olcDatabase={1}mdb,cn=config"
ldapsearch -x -D "cn=admin,dc=jkristian,dc=com" -y /etc/ldap/admin-password.txt\
    -LLL -b "dc=jkristian,dc=com"
ldapsearch -x -D "cn=dovecot,dc=jkristian,dc=com" -y /etc/dovecot/ldap-password.txt\
    -LLL -b "dc=jkristian,dc=com" userPassword
# To delete all the data (if needed):
ldapdelete -x -D "cn=admin,dc=jkristian,dc=com" -y /etc/ldap/admin-password.txt -r ou=groups,dc=jkristian,dc=com
ldapdelete -x -D "cn=admin,dc=jkristian,dc=com" -y /etc/ldap/admin-password.txt -r ou=people,dc=jkristian,dc=com
ldapdelete -x -D "cn=admin,dc=jkristian,dc=com" -y /etc/ldap/admin-password.txt cn=dovecot,dc=jkristian,dc=com

# Configure Dovecot to use LDAP for authenticating users:
service dovecot stop
apt-get install -y dovecot-ldap

# Setup LdapCherry:
apt-get install -y python3-pip
pip install cherrypy
# To test:
python3 -m cherrypy.tutorial.tut01_helloworld
curl http://127.0.0.1:8080
# Kill the server
apt-get install -y libldap2-dev libsasl2-dev
pip install python-ldap
# Download ldapcherry-1.1.1.tar.gz from https://github.com/kakwa/ldapcherry/releases
# curl doesn't work. Maybe the links redirect.
tar -xzof ldapcherry-*.tar.gz
cd ldapcherry-1.1.1
python3 setup.py install
cd ..
./deploy
systemctl enable ldapcherry
service slapd restart
service dovecot restart
service ldapcherry restart
service apache2 restart

# `go build` uses a lot of memory, so much that it can cause thrashing.
# To avoid this, it helps to add swap space. Here's how, on Ubuntu 20:
free -h
# If it shows zero bytes of swap:
fallocate -l 1G /swapfile
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile
free -h # Should show 1GB of swap space.
nano /etc/fstab # to contain:
/swapfile none swap sw 0 0

nano /etc/sysctl.conf # to contain:
vm.swappiness=5 # Try not to use swap
vm.vfs_cache_pressure=50 # Try to retain filesystem data in cache

shutdown -r now

# FTP and WebDAV served by SFTPGo:
mkdir -p /etc/sftpgo
mkdir -p /var/www/webdav/public
cd /usr/share
git clone git@github.com:jmkristian/sftpgo.git # or https://github.com/jmkristian/sftpgo
cd sftpgo
snap install go --classic --channel=1.17/stable # https://snapcraft.io/go
go build -o /etc/sftpgo/sftpgo\
  -tags "nogcs nos3 noazblob nobolt nomysql nopgsql novaultkms noawskms nogcpkms"\
  -ldflags "-s -w -X github.com/drakkan/sftpgo/v2/version.commit=`git describe --always --dirty` -X github.com/drakkan/sftpgo/v2/version.date=`date -u +%FT%TZ`"
/etc/sftpgo/sftpgo -v
ln -s /usr/share/sftpgo/static /usr/share/sftpgo/templates /etc/sftpgo/
(cd /usr/share/sftpgo/examples/ldapauth && go build -o /etc/sftpgo/ldapauth -ldflags "-s -w")
(cd /etc/sftpgo && ./sftpgo initprovider)
service sftpgo start
service sftpgo status
# Browse http://localhost/files/web/admin
# Create user 'admin' with a strong password
systemctl enable sftpgo
